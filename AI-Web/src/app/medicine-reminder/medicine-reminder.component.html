<div class="medicine-reminder-container">
  <div class="header">
    <h2>ğŸ”” Quáº£n lÃ½ nháº¯c nhá»Ÿ uá»‘ng thuá»‘c</h2>
    <button class="btn-add" (click)="showAddReminderForm()">
      <span>+</span> ThÃªm lá»‹ch nháº¯c nhá»Ÿ
    </button>
  </div>

  <div class="messages">
    <div class="error-message" *ngIf="errorMessage">
      âš ï¸ {{ errorMessage }}
    </div>
    <div class="success-message" *ngIf="successMessage">
      âœ… {{ successMessage }}
    </div>
  </div>

  <!-- Form thÃªm/sá»­a -->
  <div class="add-form" *ngIf="showAddForm">
    <h3>{{ isEditing ? 'Sá»­a' : 'ThÃªm' }} lá»‹ch nháº¯c nhá»Ÿ</h3>
    
    <form (ngSubmit)="saveReminder()">
      <div class="form-group">
        <label>TÃªn thuá»‘c *</label>
        <input type="text" [(ngModel)]="medicineName" name="medicineName" required placeholder="VÃ­ dá»¥: Paracetamol">
      </div>

      <div class="form-group">
        <label>Giá» uá»‘ng *</label>
        <input type="time" [(ngModel)]="time" name="time" required>
      </div>

      <div class="form-group">
        <label>Láº·p láº¡i *</label>
        <select [(ngModel)]="repeatType" name="repeatType" (change)="weekday = null">
          <option value="daily">HÃ ng ngÃ y</option>
          <option value="weekly">HÃ ng tuáº§n</option>
          <option value="once">Má»™t láº§n</option>
        </select>
      </div>

      <div class="form-group" *ngIf="repeatType === 'weekly'">
        <label>NgÃ y trong tuáº§n *</label>
        <select [(ngModel)]="weekday" name="weekday" required>
          <option [value]="null">Chá»n ngÃ y</option>
          <option *ngFor="let day of weekdays" [value]="day.value">
            {{ day.label }}
          </option>
        </select>
      </div>

      <div class="form-group" *ngIf="repeatType === 'once'">
        <label>NgÃ y báº¯t Ä‘áº§u</label>
        <input type="date" [(ngModel)]="startDate" name="startDate">
      </div>

      <div class="form-group">
        <label>Ghi chÃº</label>
        <textarea [(ngModel)]="notes" name="notes" rows="3" placeholder="VÃ­ dá»¥: Uá»‘ng sau khi Äƒn"></textarea>
      </div>

      <div class="form-actions">
        <button type="button" class="btn-cancel" (click)="cancelForm()">Há»§y</button>
        <button type="submit" class="btn-save">{{ isEditing ? 'Cáº­p nháº­t' : 'Táº¡o' }}</button>
      </div>
    </form>
  </div>

  <!-- Danh sÃ¡ch reminders -->
  <div class="reminders-list" *ngIf="reminders.length > 0">
    <div class="reminder-item" *ngFor="let reminder of reminders">
      <div class="reminder-info">
        <div class="medicine-name">ğŸ’Š {{ reminder.medicine_name }}</div>
        <div class="reminder-details">
          <span class="time">â° {{ formatTime(reminder.time) }}</span>
          <span class="repeat">ğŸ”„ {{ getRepeatTypeLabel(reminder.repeat_type) }}</span>
          <span class="weekday" *ngIf="reminder.weekday !== null && reminder.weekday !== undefined">
            ğŸ“… {{ weekdays[reminder.weekday].label }}
          </span>
        </div>
        <div class="notes" *ngIf="reminder.notes">{{ reminder.notes }}</div>
        <div class="next-reminder" *ngIf="reminder.next_reminder_time">
          Láº§n nháº¯c tiáº¿p theo: {{ reminder.next_reminder_time | date: 'dd/MM/yyyy HH:mm' }}
        </div>
      </div>
      <div class="reminder-actions">
        <button class="btn-edit" (click)="editReminder(reminder)">Sá»­a</button>
        <button class="btn-delete" (click)="deleteReminder(reminder)">XÃ³a</button>
      </div>
    </div>
  </div>

  <div class="empty-state" *ngIf="reminders.length === 0 && !showAddForm">
    <p>ChÆ°a cÃ³ lá»‹ch nháº¯c nhá»Ÿ nÃ o</p>
    <button class="btn-add" (click)="showAddReminderForm()">ThÃªm lá»‹ch nháº¯c nhá»Ÿ Ä‘áº§u tiÃªn</button>
  </div>
</div>

