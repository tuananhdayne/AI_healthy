<div class="health-profile-page">
  <div class="page-header">
    <div class="header-content">
      <div class="header-icon">‚öïÔ∏è</div>
      <div class="header-text">
        <h1>H·ªì s∆° s·ª©c kh·ªèe</h1>
        <p>Th√¥ng tin s·ª©c kh·ªèe v√† g·ª£i √Ω t·∫≠p luy·ªán c√° nh√¢n h√≥a</p>
      </div>
    </div>
  </div>

  <div class="profile-container" *ngIf="!isLoading">
    <!-- Empty State -->
    <div class="empty-state" *ngIf="!profile">
      <div class="empty-icon">üìã</div>
      <h2>Ch∆∞a c√≥ h·ªì s∆° s·ª©c kh·ªèe</h2>
      <p>H√£y thi·∫øt l·∫≠p h·ªì s∆° ƒë·ªÉ nh·∫≠n g·ª£i √Ω t·∫≠p luy·ªán ph√π h·ª£p</p>
      <button class="btn-primary-medical" (click)="startEdit()">
        <span class="btn-icon">‚ûï</span>
        Thi·∫øt l·∫≠p h·ªì s∆°
      </button>
    </div>

    <!-- Profile Content -->
    <div class="profile-content" *ngIf="profile">
      <!-- Profile Info Card -->
      <div class="info-card">
        <div class="card-header">
          <span class="card-icon">üë§</span>
          <h2 class="card-title">Th√¥ng tin c√° nh√¢n</h2>
          <button class="edit-btn" (click)="startEdit()" *ngIf="!isEditing">
            <span class="btn-icon">‚úèÔ∏è</span>
            Ch·ªânh s·ª≠a
          </button>
        </div>

        <div class="card-body" *ngIf="!isEditing">
          <div class="info-grid">
            <div class="info-item">
              <span class="info-label">Tu·ªïi</span>
              <span class="info-value">{{ profile.tuoi }} tu·ªïi</span>
            </div>
            <div class="info-item">
              <span class="info-label">Chi·ªÅu cao</span>
              <span class="info-value">{{ profile.chieuCao }} cm</span>
            </div>
            <div class="info-item">
              <span class="info-label">C√¢n n·∫∑ng</span>
              <span class="info-value">{{ profile.canNang }} kg</span>
            </div>
            <div class="info-item">
              <span class="info-label">Gi·ªõi t√≠nh</span>
              <span class="info-value">{{ getGioiTinhLabel(profile.gioiTinh) }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">M·ª©c v·∫≠n ƒë·ªông</span>
              <span class="info-value">{{ getMucVanDongLabel(profile.mucVanDong) }}</span>
            </div>
          </div>
        </div>

        <!-- Edit Form -->
        <form [formGroup]="editForm" (ngSubmit)="saveProfile()" *ngIf="isEditing" class="edit-form">
          <div class="form-row">
            <div class="form-field">
              <label class="field-label">Tu·ªïi <span class="required">*</span></label>
              <input type="number" formControlName="tuoi" class="modern-input" min="1" max="120" />
            </div>
            <div class="form-field">
              <label class="field-label">Chi·ªÅu cao (cm) <span class="required">*</span></label>
              <input type="number" formControlName="chieuCao" class="modern-input" min="50" max="250" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-field">
              <label class="field-label">C√¢n n·∫∑ng (kg) <span class="required">*</span></label>
              <input type="number" formControlName="canNang" class="modern-input" min="10" max="300" step="0.1" />
            </div>
            <div class="form-field">
              <label class="field-label">Gi·ªõi t√≠nh <span class="required">*</span></label>
              <select formControlName="gioiTinh" class="modern-select">
                <option value="nam">Nam</option>
                <option value="nu">N·ªØ</option>
                <option value="khac">Kh√°c</option>
              </select>
            </div>
            <div class="form-field">
              <label class="field-label">M·ª©c v·∫≠n ƒë·ªông <span class="required">*</span></label>
              <select formControlName="mucVanDong" class="modern-select">
                <option value="it">√çt</option>
                <option value="vua">V·ª´a</option>
                <option value="nhieu">Nhi·ªÅu</option>
              </select>
            </div>
          </div>
          <div class="form-actions">
            <button type="button" class="btn-secondary-medical" (click)="cancelEdit()">H·ªßy</button>
            <button type="submit" class="btn-primary-medical" [disabled]="editForm.invalid || isLoading">
              <span *ngIf="!isLoading">üíæ L∆∞u</span>
              <span *ngIf="isLoading">‚è≥ ƒêang l∆∞u...</span>
            </button>
          </div>
        </form>
      </div>

      <!-- BMI Card -->
      <div class="bmi-card" *ngIf="bmiResult">
        <div class="card-header">
          <span class="card-icon">üìä</span>
          <h2 class="card-title">Ch·ªâ s·ªë BMI</h2>
        </div>
        <div class="card-body">
          <div class="bmi-display">
            <div class="bmi-value" [style.color]="getBMIColor(bmiResult.category)">
              {{ bmiResult.value }}
            </div>
            <div class="bmi-category" [style.color]="getBMIColor(bmiResult.category)">
              {{ bmiResult.category }}
            </div>
          </div>
          <p class="bmi-description">{{ bmiResult.description }}</p>
        </div>
      </div>

      <!-- Exercise Suggestion Card -->
      <div class="exercise-card" *ngIf="exerciseSuggestion">
        <div class="card-header">
          <span class="card-icon">üí™</span>
          <h2 class="card-title">G·ª£i √Ω t·∫≠p luy·ªán</h2>
        </div>
        <div class="card-body">
          <h3 class="suggestion-title">{{ exerciseSuggestion.title }}</h3>
          <div class="suggestion-meta">
            <div class="meta-item">
              <span class="meta-icon">üìÖ</span>
              <span class="meta-label">T·∫ßn su·∫•t:</span>
              <span class="meta-value">{{ exerciseSuggestion.frequency }}</span>
            </div>
            <div class="meta-item">
              <span class="meta-icon">‚è±Ô∏è</span>
              <span class="meta-label">Th·ªùi gian:</span>
              <span class="meta-value">{{ exerciseSuggestion.duration }}</span>
            </div>
          </div>
          <div class="exercises-list">
            <h4 class="exercises-title">C√°c b√†i t·∫≠p g·ª£i √Ω:</h4>
            <ul>
              <li *ngFor="let exercise of exerciseSuggestion.exercises; let i = index">
                <span class="exercise-icon">‚úì</span>
                <span>{{ exercise || 'B√†i t·∫≠p ' + (i + 1) }}</span>
              </li>
            </ul>
          </div>
          <div class="suggestion-notes">
            <span class="notes-icon">üí°</span>
            <p>{{ exerciseSuggestion.notes }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Messages -->
    <div class="message-success" *ngIf="successMessage">
      <span class="message-icon">‚úÖ</span>
      {{ successMessage }}
    </div>
    <div class="message-error" *ngIf="errorMessage">
      <span class="message-icon">‚ö†Ô∏è</span>
      {{ errorMessage }}
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="isLoading">
    <div class="loading-spinner"></div>
    <p>ƒêang t·∫£i...</p>
  </div>
</div>

